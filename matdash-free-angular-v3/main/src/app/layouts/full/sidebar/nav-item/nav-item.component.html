<!-- ======= CABECERA (navCap) ======= -->
@if (item.navCap) {

  @if (item.divider) {
    <span class="sidebar-divider"></span>
  }

  <div mat-subheader class="nav-caption">
    {{ item.navCap }}
  </div>

}

<!-- ========= ITEM INTERNO ========= -->
@if (!item.navCap && !item.external) {
  <a mat-list-item
     class="menu-list-item"
     (click)="onItemSelected(item)"
     [ngClass]="{
        activeMenu: item.route ? router.isActive(item.route, true) : false,
        expanded: expanded,
        disabled: item.disabled
     }">

    <!-- ICONO -->
    <span class="iconify routeIcon"
          matListItemIcon
          [attr.data-icon]="item.iconName"></span>

    <!-- TÃTULO -->
    <span class="hide-menu">{{ item.displayName }}</span>

    <!-- FLECHA Y CHIP -->
    @if (item.children?.length) {
      <span class="arrow-icon" fxFlex>

        <span fxFlex></span>

        @if (item.chip) {
          <span>
            <span class="{{ item.chipClass }} p-x-8 p-y-4 item-chip f-w-500 rounded-pill">
              {{ item.chipContent }}
            </span>
          </span>
        }

        <mat-icon [@indicatorRotate]="expanded ? 'expanded' : 'collapsed'">
          expand_more
        </mat-icon>

      </span>
    }
  </a>
}

<!-- ========= LINK EXTERNO ========= -->
@if (!item.navCap && item.external) {
  <mat-list-item
    class="menu-list-item"
    (click)="openExternalLink(item.route)"
    target="_blank">

    <span class="iconify routeIcon"
          matListItemIcon
          [attr.data-icon]="item.iconName"></span>

    <span class="hide-menu">{{ item.displayName }}</span>

    @if (item.chip) {
      <span>
        <span class="{{ item.chipClass }} p-x-8 p-y-4 item-chip f-w-500 rounded-pill">
          {{ item.chipContent }}
        </span>
      </span>
    }
  </mat-list-item>
}

<!-- ========= SUB-ITEMS ========= -->
@if (item.children?.length) {
  @for (child of item.children; track child.displayName) {
    <app-nav-item
      [item]="child"
      [depth]="depth + 1">
    </app-nav-item>
  }
}
